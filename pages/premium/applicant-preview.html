<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Premium</title>
  <link href="../../dist/output.css" rel="stylesheet">
</head>
<body class="bg-white text-gray-900 dark:bg-gray-900">

  <!-- Top header -->


	<!-- Header -->
	

  <header class="bg-[#0E4D22] text-white">
    <div class="max-w-md mx-auto relative px-4 pt-6 pb-5">
      <h1 class="text-center font-semibold">Preview Submission</h1>
      
    </div>
    <!-- curved white top like in mock -->
    <div class="max-w-md mx-auto bg-white dark:bg-gray-900 rounded-t-3xl h-6"></div>
  </header>

	<main class="mx-auto max-w-md px-4 py-6 space-y-6">
    <!-- Summary -->
    <section class="bg-white dark:bg-gray-800 rounded-md shadow p-5">
      <h2 class="text-xl font-bold mb-4 text-green-700 dark:text-green-200 font-Kodchasan">Preview Your Pitch</h2>
      <dl class="space-y-3 text-gray-700">
 
<div class="flex justify-between gap-4">
          <dt class="font-medium text-gray-500 dark:text-gray-300">Project Title:</dt>
          <dd id="pTitle" class="text-right max-w-[60%] dark:text-gray-300"></dd>
        </div>
		  <div class="flex justify-between gap-4">
          <dt class="font-medium text-gray-500 dark:text-gray-300">Category:</dt>
          <dd id="pCategory" class="text-right max-w-[60%] dark:text-gray-300"></dd>
        </div>
		  <div class="flex justify-between gap-4">
          <dt class="font-medium text-gray-500 dark:text-gray-300">Funds Needed:</dt>
          <dd id="pFunds" class="text-right max-w-[60%] dark:text-gray-300"></dd>
        </div>
		   <div>
          <dt class="font-medium text-gray-500 dark:text-gray-300">Summary:</dt>
          <dd id="pSummary" class="mt-1 dark:text-gray-300"></dd>
        </div>
		 <div>
          <dt class="font-medium text-gray-500 dark:text-gray-300">Problem & Solution:</dt>
          <dd id="pSolution" class="mt-1 dark:text-gray-300"></dd>
        </div>
		  <div>
          <dt class="font-medium text-gray-500 dark:text-gray-300">Impact:</dt>
          <dd id="pImpact" class="mt-1 dark:text-gray-300"></dd>
        </div>
		  
		  
		  <div class="flex justify-between gap-4">
          <dt class="font-medium text-gray-500 dark:text-gray-300">Timeline:</dt>
          <dd id="pTimeline" class="text-right max-w-[60%] dark:text-gray-300"></dd>
        </div>
   
    

    <!-- Media Section -->
    <div id="proposalBlock" class="hidden mt-4">
      <strong>Proposal:</strong>
      <div class="mt-2">
        <iframe id="proposalPdf" class="hidden w-full h-48"></iframe>
        <img id="proposalImg" class="hidden h-32 rounded border" />
      </div>
      <div id="proposalName" class="text-sm text-gray-500"></div>
    </div>

    <div id="coverPhotoBlock" class="hidden mt-4">
      <strong>Cover Photo:</strong>
      <img id="coverImg" class="h-32 rounded border mt-2" />
      <div id="coverName" class="text-sm text-gray-500"></div>
    </div>

    <div id="videoBlock" class="hidden mt-4">
      <strong>Video Pitch:</strong>
      <video id="videoFile" class="w-full mt-2 rounded" controls></video>
      <div id="videoName" class="text-sm text-gray-500"></div>
    </div>

    <div id="voiceBlock" class="hidden mt-4">
      <strong>Voice Pitch:</strong>
      <audio id="voiceFile" class="w-full mt-2" controls></audio>
      <div id="voiceName" class="text-sm text-gray-500"></div>
    </div>

	   <div class="mx-auto max-w-md px-4 py-4 space-y-3">
      <button id="editBtn"
              class="w-full dark:border-gray-500 dark:bg-gray-900 rounded-md border border-gray-300 text-blue-500 dark:text-gray-300 py-2 text-base font-medium hover:bg-gray-200" onclick="window.location.href='applicant-pitch.html'">
        Edit
      </button>
      <button id="submitBtn"
              class="w-full rounded-md bg-yellow-600 text-white py-2 text-base font-semibold hover:bg-yellow-700" onclick="window.location.href='premium-search.html'">
        Submit
      </button>
		   <button id="closeBtn"
              class="w-full dark:border-gray-500 dark:bg-gray-900 rounded-md border border-gray-300 text-red-500 dark:text-red-300 py-2 text-base font-medium hover:bg-gray-200" onclick="window.location.href='premium-search.html'">
        Close
      </button>
    </div>
		</dl>
		</section>
	</main>
 

  <script>
    const raw = localStorage.getItem("applicantPitchData");
    let data = {};
    try { data = raw ? JSON.parse(raw) : {}; } catch (e) {}

    const set = (id, text) => { const el = document.getElementById(id); if (el) el.textContent = text || 'â€”'; };
    set("pTitle", data.projectTitle);
    set("pCategory", data.projectCategory);
    set("pFunds", data.fundsNeeded);
    set("pSummary", data.summary);
    set("pSolution", data.solution);
    set("pImpact", data.impact);
    set("pTimeline", data.timeline);

    // Proposal
    if (data.proposalURL) {
      const isPdf = (data.proposalType || "").includes("pdf") || (data.proposalName || "").endsWith(".pdf");
      if (isPdf) {
        document.getElementById("proposalPdf").src = data.proposalURL;
        document.getElementById("proposalPdf").classList.remove("hidden");
      } else {
        document.getElementById("proposalImg").src = data.proposalURL;
        document.getElementById("proposalImg").classList.remove("hidden");
      }
      document.getElementById("proposalName").textContent = data.proposalName;
      document.getElementById("proposalBlock").classList.remove("hidden");
    }

    if (data.coverPhotoURL) {
      document.getElementById("coverImg").src = data.coverPhotoURL;
      document.getElementById("coverName").textContent = data.coverPhotoName;
      document.getElementById("coverPhotoBlock").classList.remove("hidden");
    }

    if (data.videoURL) {
      document.getElementById("videoFile").src = data.videoURL;
      document.getElementById("videoName").textContent = data.videoName;
      document.getElementById("videoBlock").classList.remove("hidden");
    }

    if (data.voiceURL) {
      document.getElementById("voiceFile").src = data.voiceURL;
      document.getElementById("voiceName").textContent = data.voiceName;
      document.getElementById("voiceBlock").classList.remove("hidden");
    }

    //document.getElementById("editBtn").onclick = () => {
    //  if (window.opener && !window.opener.closed) {
      //  window.opener.focus();
      //} else {
       // window.open("applicant-pitch.html", "_self");
      //}
      //window.close();
    //};

    document.getElementById("submitBtn").onclick = () => {
      alert("Pitch submitted successfully!");
      window.close();
    };

    document.getElementById("closeBtn").onclick = () => window.close();
  </script>
	
	<script src="../../js/script.js"></script>
</body>
</html>
